(self.webpackChunkifood_frontend_test=self.webpackChunkifood_frontend_test||[]).push([[888],{43774:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(67294),l=n(6129),a=n(60404);const i=function(e){var t=e.retryAction;return r.createElement(l.ZP,{status:"500",title:"500",subTitle:"Sorry, something went wrong.",extra:r.createElement(a.Z,{type:"primary",onClick:t},"Try again")})}},33749:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C});var r=n(67294),l=n(35924),a=n(65466),i=n(72199),o=n(18048),u=n(42297),c=n(9669),s=n.n(c);function v(e,t,n,r,l,a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,l)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var a=e.apply(t,n);function i(e){v(a,r,l,i,o,"next",e)}function o(e){v(a,r,l,i,o,"throw",e)}i(void 0)}))}}var f=n(55917),p=n(43774),m=n(53816),h=n.n(m),y=n(23279),E=n.n(y),k=n(73260),w=n(29163),g=l.Z.Panel;const C=(0,o.$j)((function(e){return{playlist:e.playlist,filter:e.filter,auth:e.auth}}),{fetchFeaturedPlaylists:function(){return function(){var e=d(regeneratorRuntime.mark((function e(t,n){var r,l,a,i,o,c,v,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(r=n())||void 0===r?void 0:r.playlists)){e.next=2;break}return e.abrupt("return");case 2:return t({type:"FETCH_FEATURED_PLAYLISTS_REQUEST"}),i=new URL(u.xy),Object.keys(null===(l=n())||void 0===l||null===(a=l.filter)||void 0===a?void 0:a.values).forEach((function(e){var t,r,l,a,o,u="timestamp"===e?null===(t=n())||void 0===t||null===(r=t.filter)||void 0===r||null===(l=r.values[e])||void 0===l?void 0:l.format():null===(a=n())||void 0===a||null===(o=a.filter)||void 0===o?void 0:o.values[e];return i.searchParams.append(e,encodeURI(u))})),e.prev=5,e.next=8,s().get(i,{headers:{Authorization:"Bearer ".concat(null===(o=n())||void 0===o||null===(c=o.auth)||void 0===c?void 0:c.token)}});case 8:if(v=e.sent,!(d=v.data).error){e.next=12;break}return e.abrupt("return",console.log(d.error));case 12:t({type:"FETCH_FEATURED_PLAYLISTS_SUCCESS",payload:d}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0),t({type:"FETCH_FEATURED_PLAYLISTS_FAILED",payload:e.t0});case 19:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,n){return e.apply(this,arguments)}}()},fetchTracks:function(e){return function(){var t=d(regeneratorRuntime.mark((function t(n,r){var l,a,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"FETCH_TRACKS_REQUEST"}),t.prev=1,t.next=4,s().get("".concat(e),{headers:{Authorization:"Bearer ".concat(null===(l=r())||void 0===l||null===(a=l.auth)||void 0===a?void 0:a.token)}});case 4:i=t.sent,o=i.data,n({type:"FETCH_TRACKS_SUCCESS",payload:o}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),n({type:"FETCH_TRACKS_FAILED",payload:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()}})((function(e){var t,n,o=e.fetchFeaturedPlaylists,u=e.playlist,c=e.filter,s=e.fetchTracks,v=e.auth,d=(0,r.useCallback)(E()(o,800),[]);(0,r.useEffect)((function(){d();var e=setInterval((function(){(null==v?void 0:v.token)&&d()}),3e4);return function(){return clearInterval(e)}}),[null==c?void 0:c.values]);var m=(0,r.useMemo)((function(){var e,t,n;return null==u||null===(e=u.filters)||void 0===e||null===(t=e.playlists)||void 0===t||null===(n=t.items)||void 0===n?void 0:n.filter((function(e){var t=e.name;return h()(t).toLowerCase().includes(h()(null==c?void 0:c.text).toLowerCase())}))}),[null==c?void 0:c.text,null==u||null===(t=u.filters)||void 0===t||null===(n=t.playlists)||void 0===n?void 0:n.items]);return(null==u?void 0:u.loading)?r.createElement(f.Z,null):(null==u?void 0:u.error)?r.createElement(p.Z,null):r.createElement(l.Z,{accordion:!0,onChange:function(e){var t,n;e&&s(null===(t=m[e])||void 0===t||null===(n=t.tracks)||void 0===n?void 0:n.href)}},null==m?void 0:m.map((function(e,t){var n;return r.createElement(r.Fragment,{key:null==e?void 0:e.id},r.createElement(g,{header:e.name,key:t},r.createElement(a.ZP,{itemLayout:"horizontal",dataSource:null==u||null===(n=u.playlistTracks)||void 0===n?void 0:n.items,style:{maxHeight:400,overflow:"auto"},renderItem:function(e){var t,n,l,o,u,c=e.track;return r.createElement(_,{key:c.id,onClick:function(){return window.open(c.preview_url)}},r.createElement(a.ZP.Item,null,r.createElement(a.ZP.Item.Meta,{avatar:r.createElement(i.C,{shape:"square",size:"large",src:null==c||null===(t=c.album)||void 0===t||null===(n=t.images)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.url}),title:null==c?void 0:c.name,description:null==c||null===(o=c.artists)||void 0===o||null===(u=o[0])||void 0===u?void 0:u.name})),r.createElement(k.Z,{onClick:function(){return window.open(c.preview_url)}}))}})))})))}));var _=w.ZP.div.withConfig({displayName:"Playlists__RowDiv",componentId:"sc-1oqmzl5-0"})(["display:flex;flex-direction:row;align-items:center;width:100%;li{width:100%;}svg{height:30px;width:30px;opacity:0;}&:hover{svg{opacity:1;}padding-right:20px;cursor:pointer;}"])}}]);