(self.webpackChunkifood_frontend_test=self.webpackChunkifood_frontend_test||[]).push([[888],{43774:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(67294),l=n(6129),i=n(60404);const o=function(e){var t=e.retryAction;return r.createElement(l.ZP,{status:"500",title:"500",subTitle:"Sorry, something went wrong.",extra:r.createElement(i.Z,{type:"primary",onClick:t},"Try again")})}},33749:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Playlists:()=>_,default:()=>T});var r=n(67294),l=n(35924),i=n(65466),o=n(72199),a=n(18048),u=n(42297),c=n(9669),s=n.n(c),d=n(37710);function v(e,t,n,r,l,i,o){try{var a=e[i](o),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,l)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var i=e.apply(t,n);function o(e){v(i,r,l,o,a,"next",e)}function a(e){v(i,r,l,o,a,"throw",e)}o(void 0)}))}}var p=n(55917),m=n(43774),h=n(53816),y=n.n(h),E=n(23279),k=n.n(E),w=n(73260),g=n(29163),C=l.Z.Panel,_=function(e){var t,n,a=e.fetchFeaturedPlaylists,u=e.playlist,c=e.filter,s=e.fetchTracks,d=e.auth,v=(0,r.useCallback)(k()(a,800),[]);(0,r.useEffect)((function(){v();var e=setInterval((function(){(null==d?void 0:d.token)&&v()}),3e4);return function(){return clearInterval(e)}}),[null==c?void 0:c.values]);var f=(0,r.useMemo)((function(){var e,t,n;return null==u||null===(e=u.filters)||void 0===e||null===(t=e.playlists)||void 0===t||null===(n=t.items)||void 0===n?void 0:n.filter((function(e){var t=e.name;return y()(t).toLowerCase().includes(y()(null==c?void 0:c.text).toLowerCase())}))}),[null==c?void 0:c.text,null==u||null===(t=u.filters)||void 0===t||null===(n=t.playlists)||void 0===n?void 0:n.items]);return(null==u?void 0:u.loading)?r.createElement(p.Z,null):(null==u?void 0:u.error)?r.createElement(m.Z,null):r.createElement(S,null,r.createElement(l.Z,{accordion:!0,onChange:function(e){var t,n;e&&s(null===(t=f[e])||void 0===t||null===(n=t.tracks)||void 0===n?void 0:n.href)}},null==f?void 0:f.map((function(e,t){var n;return r.createElement(r.Fragment,{key:null==e?void 0:e.id},r.createElement(C,{header:e.name,key:t},r.createElement(i.ZP,{itemLayout:"horizontal",dataSource:null==u||null===(n=u.playlistTracks)||void 0===n?void 0:n.items,style:{maxHeight:400,overflow:"auto"},renderItem:function(e){var t,n,l,a,u,c=e.track;return r.createElement(x,{key:c.id,onClick:function(){return window.open(c.preview_url)}},r.createElement(i.ZP.Item,null,r.createElement(i.ZP.Item.Meta,{avatar:r.createElement(o.C,{shape:"square",size:"large",src:null==c||null===(t=c.album)||void 0===t||null===(n=t.images)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.url}),title:null==c?void 0:c.name,description:null==c||null===(a=c.artists)||void 0===a||null===(u=a[0])||void 0===u?void 0:u.name})),r.createElement(w.Z,{onClick:function(){return window.open(c.preview_url)}}))}})))}))))};const T=(0,a.$j)((function(e){return{playlist:e.playlist,filter:e.filter,auth:e.auth}}),{fetchFeaturedPlaylists:function(){return function(){var e=f(regeneratorRuntime.mark((function e(t,n){var r,l,i,o,a,c,v,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(r=n())||void 0===r?void 0:r.playlists)){e.next=2;break}return e.abrupt("return");case 2:return t({type:"FETCH_FEATURED_PLAYLISTS_REQUEST"}),o=new URL(u.xy),Object.keys(null===(l=n())||void 0===l||null===(i=l.filter)||void 0===i?void 0:i.values).forEach((function(e){var t,r,l,i,a,u="timestamp"===e?null===(t=n())||void 0===t||null===(r=t.filter)||void 0===r||null===(l=r.values[e])||void 0===l?void 0:l.format():null===(i=n())||void 0===i||null===(a=i.filter)||void 0===a?void 0:a.values[e];return o.searchParams.append(e,encodeURI(u))})),e.prev=5,e.next=8,s().get(o,{headers:{Authorization:"Bearer ".concat(null===(a=n())||void 0===a||null===(c=a.auth)||void 0===c?void 0:c.token)}});case 8:if(v=e.sent,!(f=v.data).error){e.next=12;break}return e.abrupt("return",console.log(f.error));case 12:t({type:"FETCH_FEATURED_PLAYLISTS_SUCCESS",payload:f}),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0),(null===(p=e.t0.includes)||void 0===p?void 0:p.call(e.t0,"code 401"))&&t((0,d.kS)()),t({type:"FETCH_FEATURED_PLAYLISTS_FAILED",payload:e.t0});case 20:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,n){return e.apply(this,arguments)}}()},fetchTracks:function(e){return function(){var t=f(regeneratorRuntime.mark((function t(n,r){var l,i,o,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"FETCH_TRACKS_REQUEST"}),t.prev=1,t.next=4,s().get("".concat(e),{headers:{Authorization:"Bearer ".concat(null===(l=r())||void 0===l||null===(i=l.auth)||void 0===i?void 0:i.token)}});case 4:o=t.sent,a=o.data,n({type:"FETCH_TRACKS_SUCCESS",payload:a}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),(null===(u=t.t0.includes)||void 0===u?void 0:u.call(t.t0,"code 401"))&&n((0,d.kS)()),n({type:"FETCH_TRACKS_FAILED",payload:t.t0});case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()}})(_);var S=g.ZP.div.withConfig({displayName:"Playlists__Container",componentId:"sc-1oqmzl5-0"})([""]),x=g.ZP.div.withConfig({displayName:"Playlists__RowDiv",componentId:"sc-1oqmzl5-1"})(["display:flex;flex-direction:row;align-items:center;width:100%;li{width:100%;}svg{height:30px;width:30px;opacity:0;}&:hover{svg{opacity:1;}padding-right:20px;cursor:pointer;}"])}}]);